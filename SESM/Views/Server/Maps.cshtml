@{
    ViewBag.Title = "Server Maps";

    List<KeyValuePair<string, string>> breadCrumb = new List<KeyValuePair<string, string>>();
    breadCrumb.Add(new KeyValuePair<string, string>("Server", "/Server/"));
    breadCrumb.Add(new KeyValuePair<string, string>(ViewBag.Server.Name, "/" + ViewBag.ServerID + "/Dashboard/"));
    breadCrumb.Add(new KeyValuePair<string, string>("Server Maps", "/" + ViewBag.ServerID + "/Maps/"));
    ViewBag.Breadcrumb = breadCrumb;

    ViewBag.RefreshBtn = true;
}
<script src="/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js" type="text/javascript"></script>
<div class="col-md-12">
    <div class="portlet light bordered">
        <div class="portlet-body">
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-6">
                        <button id="btnCreateServer" class="btn green" style="display: none;">
                            <i class=" fa fa-plus"></i> New
                        </button>
                        <button id="btnDeleteServers" class="btn red" style="display: none;">
                            <i class=" fa fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-bordered table-hover" id="mapTable">
                <thead>
                    <tr>
                        <th class="table-checkbox">
                            <input type="checkbox" class="group-checkable" />
                        </th>
                        <th>
                            Directory
                        </th>
                        <th>
                            Name
                        </th>
                        <th>
                            Size
                        </th>
                        <th>
                            Last Edit
                        </th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript">
    function initPage() {
        var locTable = $('#mapTable');

        function fileSizeIEC(a, b, c, d, e) {
            if (a < 1024)
                return a + ' B';
            return (b = Math, c = b.log, d = 1024, e = c(a) / c(d) | 0, a / b.pow(d, e)).toFixed(2)
                + '&nbsp;' + (e ? 'KMGTPEZY'[--e] + 'B' : 'B');
        }

        locTable.dataTable({
            "columns": [{
                "orderable": false
            }, {
                "orderable": true
            }, {
                "orderable": true
            }, {
                "orderable": true
            }, {
                "orderable": true
            }],
            // set the initial value
            "language": {
                "emptyTable": "Loading ..."
            },
            "paging": false,
            "searching": false,
            "info": false,
            "columnDefs": [{
                "searchable": false,
                "targets": [0]
            }],
            "order": [[1, "asc"]] // set second column as a default sort by asc
        });

        function refereshList() {
            $.post("/API/Map/GetMaps",
            {
                ServerID: serverID
            },
            function (data) {
                var root = $($.parseXML(data)).find("Response");

                if (root.children("Type").text() == "Error") {
                    toastr.error(root.children("Content").text(), "Error " + root.children("ReturnCode").text());
                    $("#btnRefreshList").children("i").removeClass("fa-spin");
                    return;
                }

                locTable.DataTable().clear();
                root.children("Content").children("Map").each(function (index) {
                    var item = $(this);
                    var DirName = item.children("DirName").text();
                    var MapName = item.children("MapName").text();
                    var Date = item.children("Date").text();
                    var Size = item.children("Size").text();

                    var chkbField = '<input type="checkbox" class="checkboxes" value="' + DirName + '" />';

                    locTable.DataTable().row.add([chkbField, DirName, MapName, fileSizeIEC(Size), Date]);
                });

                locTable.DataTable().draw();
                locTable.find('input:checkbox').uniform();
            });
        }

        refereshList();

        $("#btnRefresh").click(function () {
            refereshList();
        });
    }
</script>
