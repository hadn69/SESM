@using SESM.DAL
@model SESM.Models.View.Server.ServerViewModel
@{
    ViewBag.Title = "Server Details";
    object labelClass = new {@class = "col-md-5 control-label"};

    const string valueColumn = "col-md-6";
    int id = (int) ViewData["ID"];
    
    object superAdminAccessClass = new { @class = "form-control", disabled = "true" };
    object adminAccessClass = new { @class = "form-control", disabled = "true" };
    object managerAccessClass = new { @class = "form-control"};
    AccessLevel accessLevel = (AccessLevel)ViewData["AccessLevel"];
    if (accessLevel == AccessLevel.SuperAdmin)
    {
        superAdminAccessClass = new {@class = "form-control"};
    }
    if (accessLevel == AccessLevel.SuperAdmin || accessLevel == AccessLevel.Admin)
    {
        adminAccessClass = new {@class = "form-control"};
    }
}
@using (Html.BeginForm("Details", "Server", new {ReturnUrl = ViewBag.ReturnUrl}, FormMethod.Post, new {@class = "form-horizontal", role = "form"}))
{
    <div class="row">   
        <div class="col-md-6">
            <section>
                <hr />
                <h3>Server Settings</h3>
                <hr />
                @Html.ValidationSummary()
                <div class="form-group">
                    @Html.LabelFor(m => m.Name, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.Name, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.Name)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.IsPublic, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.IsPublic, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.IsPublic)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.ServerName, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.ServerName, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.ServerName)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.IP, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.IP, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.IP)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.ServerPort, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.ServerPort, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.ServerPort)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.SteamPort, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.SteamPort, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.SteamPort)
                    </div>
                </div>
                
            </section>
        </div>
        <div class="col-md-6">
            <section>
                <hr />
                <h3>Game Settings</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.GameMode, labelClass)
                    <div class="@valueColumn">
                        @Html.EnumDropDownListFor(m => m.GameMode, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.GameMode)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.EnvironmentHostility, labelClass)
                    <div class="@valueColumn">
                        @Html.EnumDropDownListFor(m => m.EnvironmentHostility, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.EnvironmentHostility)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineMode, labelClass)
                    <div class="@valueColumn">
                        @Html.EnumDropDownListFor(m => m.OnlineMode, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.OnlineMode)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.MaxPlayers, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.MaxPlayers, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.MaxPlayers)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.MaxFloatingObjects, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.MaxFloatingObjects, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.MaxFloatingObjects)
                    </div>
                </div>
            </section>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <section>
                <hr />
                <h3>Multiplier Settings</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.WelderSpeedMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.WelderSpeedMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.WelderSpeedMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.GrinderSpeedMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.GrinderSpeedMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.GrinderSpeedMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.HackSpeedMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.HackSpeedMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.HackSpeedMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.InventorySizeMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.InventorySizeMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.InventorySizeMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.AssemblerSpeedMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.AssemblerSpeedMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.AssemblerSpeedMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.AssemblerEfficiencyMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.AssemblerEfficiencyMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.AssemblerEfficiencyMultiplier)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.RefinerySpeedMultiplier, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.RefinerySpeedMultiplier, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.RefinerySpeedMultiplier)
                    </div>
                </div>
            </section>
        </div>
        <div class="col-md-6">
            <section>
                <hr />
                <h3>Gameplay Settings</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.AutoHealing, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.AutoHealing, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.AutoHealing)
                    </div>
                </div>
                
                <div class="form-group">
                    @Html.LabelFor(m => m.WeaponsEnabled, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.WeaponsEnabled, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.WeaponsEnabled)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.ShowPlayerNamesOnHud, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.ShowPlayerNamesOnHud, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.ShowPlayerNamesOnHud)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.ThrusterDamage, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.ThrusterDamage, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.ThrusterDamage)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.CargoShipsEnabled, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.CargoShipsEnabled, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.CargoShipsEnabled)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.RealisticSound, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.RealisticSound, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.RealisticSound)
                    </div>
                </div>
                
            </section>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <section>
                <hr />
                <h3>Map Settings @if (accessLevel == AccessLevel.Admin || accessLevel == AccessLevel.SuperAdmin)
                                 {
                                     <a class="btn btn-default" href="@(Url.Action("Index", "Map", new {id = id}))">Manage Maps</a>
                                 }</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.ScenarioType, labelClass)
                    <div class="@valueColumn">
                        @Html.DisplayTextFor(m => m.ScenarioType)
                        @Html.ValidationMessageFor(m => m.ScenarioType)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.SaveName, labelClass)
                    <div class="@valueColumn">
                        @Html.DisplayTextFor(m => m.SaveName)
                        @Html.ValidationMessageFor(m => m.SaveName)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.AsteroidAmount, labelClass)
                    <div class="@valueColumn">
                        @Html.DisplayTextFor(m => m.AsteroidAmount)
                        @Html.ValidationMessageFor(m => m.AsteroidAmount)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.WorldSizeKm, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.WorldSizeKm, null, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.WorldSizeKm)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.AutoSave, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.AutoSave, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.AutoSave)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.RemoveTrash, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.RemoveTrash, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.RemoveTrash)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.RespawnShipDelete, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.RespawnShipDelete, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.RespawnShipDelete)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.EnableCopyPaste, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.EnableCopyPaste, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.EnableCopyPaste)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.EnableSpectator, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.EnableSpectator, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.EnableSpectator)
                    </div>
                </div>

            </section>
        </div>
        <div class="col-md-6">
            <section>
                <hr />
                <h3>In-Game Management Settings</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.ResetOwnership, labelClass)
                    <div class="@valueColumn">
                        @Html.CheckBoxFor(m => m.ResetOwnership, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.ResetOwnership)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.Administrators, labelClass)
                    <div class="@valueColumn">
                        @Html.TextAreaFor(m => m.Administrators, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.Administrators)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.Banned, labelClass)
                    <div class="@valueColumn">
                        @Html.TextAreaFor(m => m.Banned, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.Banned)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.GroupID, labelClass)
                    <div class="@valueColumn">
                        @Html.TextBoxFor(m => m.GroupID, null, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.GroupID)
                    </div>
                </div>
            </section>
            <section>
                <hr />
                <h3>Web Management Settings</h3>
                <hr />
                <div class="form-group">
                    @Html.LabelFor(m => m.WebAdministrators, labelClass)
                    <div class="@valueColumn">
                        @Html.TextAreaFor(m => m.WebAdministrators, superAdminAccessClass)
                        @Html.ValidationMessageFor(m => m.WebAdministrators)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.WebManagers, labelClass)
                    <div class="@valueColumn">
                        @Html.TextAreaFor(m => m.WebManagers, adminAccessClass)
                        @Html.ValidationMessageFor(m => m.WebManagers)
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.WebUsers, labelClass)
                    <div class="@valueColumn">
                        @Html.TextAreaFor(m => m.WebUsers, managerAccessClass)
                        @Html.ValidationMessageFor(m => m.WebUsers)
                    </div>
                </div>
            </section>
        </div>
    </div>
    <div class="col-md-offset-2 col-md-10">
        <div class="btn-group">
            <input type="submit" value="Save" name="action:SaveDetails" class="btn btn-default" />
            <input type="submit" value="Save and (Re)Start" name="action:SaveRestartDetails" class="btn btn-default" />
        </div>
    </div>
}
<br/>
<br/>
<br/>
<div class="row">
    <div class="col-md-12">
        <a class="btn btn-default" href="@(Url.Action("Status", "Server", new {id = ViewData["ID"]}))">Back to Server Status</a>
    </div>
</div>
